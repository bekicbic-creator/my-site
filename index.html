<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Tohir — Хакерская зона (камера)</title>
<style>
  :root{
    --bg:#000;
    --neon:#00ff66;
    --muted:#9fffa0a6;
  }
  *{box-sizing:border-box;margin:0;padding:0}
  body{
    min-height:100vh;background:#000;color:var(--neon);
    font-family: "Courier New", monospace;display:flex;align-items:center;justify-content:center;padding:20px;
  }
  .card{
    width:100%;max-width:980px;background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
    border:1px solid rgba(0,255,102,0.06);padding:20px;border-radius:12px;box-shadow:0 10px 40px rgba(0,0,0,0.6);
  }
  h1{font-size:1.6rem;text-align:center;margin-bottom:8px;text-shadow:0 0 12px rgba(0,255,102,0.06)}
  p.lead{text-align:center;color:var(--muted);margin-bottom:14px}
  .controls{display:flex;gap:10px;justify-content:center;flex-wrap:wrap;margin-bottom:14px}
  .btn{padding:10px 14px;border-radius:10px;border:2px solid rgba(0,255,102,0.12);background:transparent;color:var(--neon);cursor:pointer;font-weight:700}
  .btn.primary{background:linear-gradient(45deg,#00ff66,#00aaff);color:#001}
  .btn.warn{background:linear-gradient(45deg,#ffb54d,#ff6b6b);color:#111}
  .hint{text-align:center;color:var(--muted);font-size:0.9rem;margin-top:8px}

  /* camera area */
  .camera-wrap{display:none;margin-top:14px;border-radius:10px;overflow:hidden;border:3px solid rgba(0,255,102,0.06);background:#000}
  iframe.cam{
    width:100%;height:520px;border:0;background:#111;display:block;
  }
  .cam-fallback{padding:18px;text-align:center;color:var(--muted);background:linear-gradient(180deg, rgba(0,0,0,0.6), rgba(0,0,0,0.45))}
  .cam-actions{display:flex;gap:8px;justify-content:center;padding:12px;background:rgba(0,0,0,0.35)}

  /* modal confirm */
  .modal{position:fixed;inset:0;display:flex;align-items:center;justify-content:center;z-index:9999;visibility:hidden;opacity:0;transition:opacity .18s}
  .modal.show{visibility:visible;opacity:1}
  .overlay{position:absolute;inset:0;background:rgba(0,0,0,0.7)}
  .modal-card{position:relative;background:#070707;padding:18px;border-radius:10px;border:1px solid rgba(0,255,102,0.06);width:92%;max-width:640px;z-index:2}
  .modal-card h3{color:var(--neon);margin-bottom:8px}
  .modal-card p{color:var(--muted);font-size:0.94rem}
  .modal-actions{display:flex;gap:8px;justify-content:flex-end;margin-top:12px}

  footer{margin-top:12px;text-align:center;color:var(--muted);font-size:0.85rem}
  @media(max-width:720px){ iframe.cam{height:320px} }
</style>
</head>
<body>
  <div class="card">
    <h1>Tohir — Демонстрация публичной камеры</h1>
    <p class="lead">Нажми кнопку ниже — сайт попытается показать публичную камеру (легальный embed). Если встраивание запрещено — предложим открыть в новой вкладке.</p>

    <div class="controls">
      <button id="hackBtn" class="btn primary">Взломать камеру (демо)</button>
      <button id="openDirect" class="btn">Открыть камеру в новой вкладке</button>
      <button id="hideCam" class="btn warn">Скрыть</button>
    </div>

    <div id="cameraArea" class="camera-wrap" aria-live="polite">
      <iframe id="camFrame" class="cam" sandbox="allow-same-origin allow-scripts allow-popups allow-forms"></iframe>
      <div class="cam-actions">
        <button id="openDirectFromArea" class="btn">Открыть в новой вкладке</button>
        <button id="closeArea" class="btn">Закрыть</button>
      </div>
      <div id="camFallback" class="cam-fallback" style="display:none;">
        <div>Встраивание заблокировано. <a id="directLink" href="#" target="_blank" style="color:var(--neon)">Открыть камеру в новой вкладке</a></div>
      </div>
    </div>

    <div class="hint">Используются только публичные камеры. Не подключайся к чужим частным стримам.</div>
    <footer>Если хочешь другую камеру — пришли ссылку на страницу камеры, я подставлю её в код (или укажу точную embed-ссылку).</footer>
  </div>

  <!-- CONFIRM MODAL -->
  <div class="modal" id="confirmModal" role="dialog" aria-hidden="true">
    <div class="overlay"></div>
    <div class="modal-card" role="document">
      <h3>Подтвердить действие</h3>
      <p>Ты собираешься открыть публичную камеру. Это легальная публичная трансляция (не взлом). Нажми «Да», чтобы продолжить.</p>
      <div class="modal-actions">
        <button id="confirmYes" class="btn primary">Да, показать</button>
        <button id="confirmNo" class="btn">Отмена</button>
      </div>
    </div>
  </div>

<script>
/*
  Как это работает:
  - EMBED_URL: пытаемся вставить этот URL в iframe (часто провайдеры дают спец. embed URL).
  - DIRECT_URL: открываем в новой вкладке, если встраивание заблокировано.
  Если хочешь другую камеру — пришли прямую ссылку на страницу камеры (я подскажу embed).
*/

/* ------------------ НАСТРОЙКИ: подставь сюда камеру, если у тебя своя ------------------ */
// Пример — публичная страница SkylineWebcams (Эйфелева башня). Иногда сайт блокирует встраивание.
// Если хочешь другую камеру — скажи ссылку, я подскажу точную embed-ссылку.
const EMBED_URL = "https://www.skylinewebcams.com/en/webcam/france/ile-de-france/paris/eiffel-tower.html";
const DIRECT_URL = "https://www.skylinewebcams.com/en/webcam/france/ile-de-france/paris/eiffel-tower.html";
/* ------------------------------------------------------------------------------------ */

const hackBtn = document.getElementById('hackBtn');
const openDirect = document.getElementById('openDirect');
const confirmModal = document.getElementById('confirmModal');
const confirmYes = document.getElementById('confirmYes');
const confirmNo = document.getElementById('confirmNo');

const cameraArea = document.getElementById('cameraArea');
const camFrame = document.getElementById('camFrame');
const camFallback = document.getElementById('camFallback');
const directLink = document.getElementById('directLink');
const openDirectFromArea = document.getElementById('openDirectFromArea');
const closeArea = document.getElementById('closeArea');
const hideCamBtn = document.getElementById('hideCam');

directLink.href = DIRECT_URL;

// открыть напрямую в новой вкладке (без попытки встраивания)
openDirect.addEventListener('click', ()=> {
  window.open(DIRECT_URL, '_blank');
});

// открывает модалку подтверждения
hackBtn.addEventListener('click', ()=> {
  confirmModal.classList.add('show');
  confirmModal.setAttribute('aria-hidden','false');
});

// отмена
confirmNo.addEventListener('click', ()=> {
  confirmModal.classList.remove('show');
  confirmModal.setAttribute('aria-hidden','true');
});

// подтверждение — пробуем вставить embed в iframe
confirmYes.addEventListener('click', ()=> {
  confirmModal.classList.remove('show');
  confirmModal.setAttribute('aria-hidden','true');

  // показываем область
  cameraArea.style.display = 'block';
  camFallback.style.display = 'none';
  camFrame.style.display = 'block';

  // ставим iframe.src
  camFrame.src = EMBED_URL;

  // ставим таймер: если iframe не загрузился за 5 секунд, показываем fallback (и ссылку откроется в новой вкладке)
  let loaded = false;
  const onLoad = ()=> { loaded = true; camFallback.style.display = 'none'; };
  camFrame.addEventListener('load', onLoad, { once: true });

  // fallback по таймауту (к примеру, встраивание блокировано)
  const t = setTimeout(()=> {
    if(!loaded){
      // скрыть iframe и показать текст с кнопкой открыть в новой вкладке
      try { camFrame.style.display = 'none'; } catch(e){}
      camFallback.style.display = 'block';
    }
  }, 4000);
});

// кнопки в области камеры
openDirectFromArea.addEventListener('click', ()=> { window.open(DIRECT_URL, '_blank'); });
closeArea.addEventListener('click', ()=> { cameraArea.style.display = 'none'; camFrame.src = ''; camFallback.style.display = 'none'; });
hideCamBtn.addEventListener('click', ()=> { cameraArea.style.display = 'none'; camFrame.src = ''; camFallback.style.display = 'none'; });

/* accessibility: ESC закрывает модалку и камеру */
document.addEventListener('keydown', (e)=> {
  if(e.key === 'Escape'){
    confirmModal.classList.remove('show');
    cameraArea.style.display = 'none';
  }
});
</script>

</body>
</html>
